!function(e){e(window).on("elementor/frontend/init",function(){var t=elementorModules.frontend.handlers.Base.extend({getDefaultSettings:function(){return{selectors:{chartElem:".premium-chart-container",chartCanvas:".premium-chart-canvas"}}},getDefaultElements:function(){var e=this.getSettings("selectors");return{$chartElem:this.$element.find(e.chartElem),$chartCanvas:this.$element.find(e.chartCanvas)}},bindEvents:function(){var t=this,a=this.elements.$chartElem.closest(".premium-tabs-content-section, .elementor-tab-content"),n=this.elements.$chartElem.closest(".premium-tabs").attr("id"),o=this.elements.$chartElem.closest(".premium-hscroll-temp");if(a.length||o.length)if(o.length){var i=!1,r=o.outerWidth();e(window).on("scroll",function(){!i&&e(window).scrollTop()>=o.data("scroll-offset")-r/2&&(t.run(),i=!0)})}else{var s=a.index();if(setTimeout(function(){a.is(":visible")&&t.run()},300),e(document).on("click","#"+n+" li[data-list-index='"+s+"']",function(){t.elements.$chartElem.hasClass("chart-rendered")||t.run()}),a.hasClass("elementor-tab-content")){var l=a.attr("id").replace("elementor-tab-content-","");(i=!1)||(i=!0,e(document).on("click","#elementor-tab-title-"+l,function(){setTimeout(function(){t.elements.$chartElem.hasClass("chart-rendered")||(console.log("render"),t.run())},300)}))}}else this.run()},chartInstance:null,columnsData:null,run:function(){var e=this.getElementSettings(),t=this.elements.$chartElem;if(t.addClass("chart-rendered"),this.columnsData=t.data("chart"),t.closest(".premium-modal-box-modal").length||"load"===e.render_event)this.getChartData();else{var a=this;new Waypoint({element:this.elements.$chartCanvas,offset:Waypoint.viewportHeight()-250,triggerOnce:!0,handler:function(){a.getChartData(),this.destroy()}})}},getSingleOptions:function(){var e=this.getElementSettings();return{scale:{ticks:{beginAtZero:e.y_axis_begin,stepSize:e.step_size,suggestedMax:e.y_axis_max,callback:function(t){var a=e.format_locale||!1;return t.toLocaleString(a)}}}}},getMultiOptions:function(){var e=this.getElementSettings(),t=e.type;return{scales:{xAxes:[{barPercentage:"bar"===t&&e.x_column_width.size?e.x_column_width.size:.9,display:"pie"!==t&&"doughnut"!==t,gridLines:{display:e.x_axis_grid,color:e.x_axis_grid_color,lineWidth:e.x_axis_grid_width.size,drawBorder:!0},scaleLabel:{display:e.x_axis_label_switch,labelString:e.x_axis_label,fontColor:e.x_axis_label_color,fontSize:e.x_axis_label_size},ticks:{fontSize:e.x_axis_labels_size||12,fontColor:e.x_axis_labels_color||"#54595f",stepSize:e.step_size,maxRotation:e.x_axis_label_rotation||0,minRotation:e.x_axis_label_rotation||0,beginAtZero:e.x_axis_begin,callback:function(t){var a=e.format_locale||!1;return t.toLocaleString(a)}}}],yAxes:[{display:"pie"!==t&&"doughnut"!==t,type:"horizontalBar"!==t?e.data_type:"category",gridLines:{display:e.y_axis_grid,color:e.y_axis_grid_color,lineWidth:e.y_axis_grid_width.size},scaleLabel:{display:e.y_axis_label_switch,labelString:e.y_axis_label,fontColor:e.y_axis_label_color,fontSize:e.y_axis_label_size},ticks:{suggestedMin:e.y_axis_min,suggestedMax:e.y_axis_max,fontSize:e.y_axis_labels_size||12,fontColor:e.y_axis_labels_color||"#54595f",beginAtZero:e.y_axis_begin,stepSize:e.step_size,callback:function(t){var a=e.format_locale||!1;return t.toLocaleString(a)}}}]}}},getGlobalOptions:function(e){var t=this,a=this.getElementSettings(),n=a.type,o=elementorFrontend.getCurrentDeviceMode(),i=a.value_on_chart,r=("pie"!==n&&"doughnut"!==n||!i)&&["mousemove","mouseout","click","touchstart","touchmove"];return a.legPos=a.legend_position,"desktop"!==o&&(a.legend_hide&&(a.legend_display=!1),a.legPos=a["legend_position_"+o]),{maintainAspectRatio:!1,layout:{padding:{top:"polarArea"===n?6:0}},events:r,animation:{duration:a.duration||500,easing:a.start_animation,onComplete:function(){r||(this.defaultFontSize=16,e.font='15px "Helvetica Neue", "Helvetica", "Arial", sans-serif',e.fillStyle="#000",e.textAlign="center",e.textBaseline="bottom",this.data.datasets.forEach(function(t){for(var n=0;n<t.data.length;n++){var o=t._meta[Object.keys(t._meta)[0]].data[n]._model,i=t._meta[Object.keys(t._meta)[0]].total,r=o.innerRadius+(o.outerRadius-o.innerRadius)/2,s=o.startAngle,l=s+(o.endAngle-s)/2,c=r*Math.cos(l),d=r*Math.sin(l);e.fillStyle=a.y_axis_labels_color;var u=String(Math.round(t.data[n]/i*100))+"%";e.fillText(u,o.x+c,o.y+d+15)}}))}},tooltips:{enabled:a.tool_tips,mode:a.tool_tips_mode,callbacks:{label:function(e,o){var i="";"pie"!=n&&"doughnut"!=n&&"polarArea"!=n||(i=o.labels[e.index]+": ");var r=o.datasets[e.datasetIndex],s=r.data.reduce(function(e,t){return parseFloat(e)+parseFloat(t)}),l=r.data[e.index];if(!a.tool_tips_percent){var c=a.format_locale||!1;l=parseFloat(l).toLocaleString(c)}var d=(l/s*100).toPrecision(3);return t.$element.hasClass("extend-tooltips")?[i,a.tool_tips_percent?d+"%":l]:i+(a.tool_tips_percent?d+"%":l)}}},legend:{display:a.legend_display,position:a.legPos,reverse:a.legend_reverse,labels:{usePointStyle:a.legend_circle,boxWidth:parseInt(a.legend_item_width),fontColor:a.legend_text_color||"#54595f",fontSize:parseInt(a.legend_text_size)}}}},renderChart:function(){var t=this.getID(),a=document.getElementById("premium-chart-canvas-"+t).getContext("2d"),n=this.getGlobalOptions(a),o=this.getElementSettings(),i=this.columnsData,r=o.x_axis_labels||"",s=o.type,l={labels:"custom"===o.data_source?r.split(","):[],datasets:[]};if(this.chartInstance=new Chart(a,{type:s,data:l,options:Object.assign(n,"radar"!==s&&"polarArea"!==s?this.getMultiOptions():this.getSingleOptions())}),"custom"===o.data_source){var c=this;i.forEach(function(e){if("pie"!==s&&"doughnut"!==s&&"polarArea"!==s&&"object"==typeof e.backgroundColor&&"empty"!==e.backgroundColor[e.backgroundColor.length-1]){var t=a.createLinearGradient(0,0,0,600),n=e.backgroundColor[1]?e.backgroundColor[1]:e.backgroundColor[0];t.addColorStop(0,e.backgroundColor[0]),t.addColorStop(1,n),e.backgroundColor=t,e.hoverBackgroundColor=t}l.datasets.push(e),c.chartInstance.update()}),e("#premium-chart-canvas-"+t).on("click",function(e){var t=c.chartInstance.getElementAtEvent(e);if(t[0]){var a=c.chartInstance.data.datasets[t[0]._datasetIndex].links[t[0]._index];null!=a&&""!=a&&window.open(a,o.y_axis_urls_target?"_blank":"_top")}})}},getChartData:function(){var t=this.getElementSettings("data_source"),a=this.columnsData,n=this;if("custom"===t)this.renderChart();else{var o=this.elements.$chartElem;o.append('<div class="premium-loading-feed"><div class="premium-loader"></div></div>'),a.url&&e.ajax({url:a.url,type:"GET",success:function(e){o.find(".premium-loading-feed").remove(),n.renderCSVChart(e)},error:function(e){console.log(e)}})}},renderCSVChart:function(e){var t=this.getID(),a=document.getElementById("premium-chart-canvas-"+t).getContext("2d"),n=this,o=e.split(/\r?\n|\r/),i=this.columnsData,r=o.shift().split(i.separator),s=this.getGlobalOptions(a),l=this.getElementSettings().type,c={labels:r,datasets:[]};this.chartInstance=new Chart(a,{type:l,data:c,options:Object.assign(s,"radar"!==l&&"polarArea"!==l?this.getMultiOptions():this.getSingleOptions())}),o.forEach(function(e,t){if(0!==e.length){var a={};a.data=e.split(i.separator),i.props[t]&&(a.borderColor=i.props[t].borderColor,a.borderWidth=i.props[t].borderWidth,a.backgroundColor=i.props[t].backgroundColor,a.hoverBackgroundColor=i.props[t].hoverBackgroundColor,a.label=i.props[t].title),c.datasets.push(a),n.chartInstance.update()}})}});elementorFrontend.elementsHandler.attachHandler("premium-chart",t)})}(jQuery);