!function(e){e(window).on("elementor/frontend/init",function(){var t=elementorModules.frontend.handlers.Base.extend({settings:{},getDefaultSettings:function(){return{selectors:{user:".fa-user",activeCat:".category.active",loading:".premium-loading-feed",filterTabs:".premium-smart-listing__filter-tabs li a",activeElement:".premium-smart-listing__filter-tabs li .active",widgetWrapper:".premium-smart-listing__wrapper",postsOuterWrapper:".premium-smart-listing__posts-outer-wrapper",currentPage:".premium-smart-listing__pagination-container .page-numbers.current",post:".premium-smart-listing__post-wrapper",listingsWrapper:".premium-smart-listing__posts-wrapper",gridItem:".premium-smart-listing__grid-item",metaSeparators:".premium-smart-listing__meta-separator"}}},getDefaultElements:function(){var e=this.getSettings("selectors");return{$filterTabs:this.$element.find(e.filterTabs),$widgetWrapper:this.$element.find(e.widgetWrapper),$postsOuterWrapper:this.$element.find(e.postsOuterWrapper),$post:this.$element.find(e.post),$listingsWrapper:this.$element.find(e.listingsWrapper)}},bindEvents:function(){this.setWidgetSettings(),this.removeMetaSeparators(),this.run()},setWidgetSettings:function(){var e=this.getElementSettings();this.settings={pageNumber:1,count:2,isLoaded:!0,reqType:"",paginationType:e.pagination_type,infinite:"yes"===e.infinite_scroll,total:this.elements.$post.data("total"),carousel:"yes"===e.carousel,scrollAfter:"yes"===e.scroll_to_offset},this.settings.loadMoreBtn=!this.settings.infinite&&"yes"===e.load_more_button,this.settings.carousel&&(this.settings.slidesToScroll=e.slides_to_scroll,this.settings.spacing=parseInt(e.carousel_spacing),this.settings.autoPlay="yes"===e.carousel_play,this.settings.fade="yes"===e.carousel_fade,this.settings.center="yes"===e.carousel_center,this.settings.speed=""!==e.carousel_speed?parseInt(e.carousel_speed):300,this.settings.arrows="yes"===e.carousel_arrows,this.settings.autoPlay&&(this.settings.autoplaySpeed=""!==e.carousel_autoplay_speed?parseInt(e.carousel_autoplay_speed):5e3))},run:function(){var t=this.getElementSettings(),s=this;this.elements.$filterTabs.length>1&&(this.initFilterTabs(),"yes"===t.wrap_tabs_sw?(s.reconstructFilterTabs(),e(window).on("resize.paConstructFilters",function(){s.reconstructFilterTabs()})):e(window).off("resize.paConstructFilters")),"custom"===t.pa_spl_skin&&this.hideExtraItems(),this.settings.carousel&&(this.elements.$listingsWrapper.slick(this.getSlickSettings()),this.settings.arrows&&this.$element.find(".page-numbers").on("click.paCarouselNav",function(){e(this).hasClass("prev")?s.elements.$listingsWrapper.slick("slickPrev"):e(this).hasClass("next")&&s.elements.$listingsWrapper.slick("slickNext")})),"yes"===t.premium_blog_paging&&this.paginate(),this.settings.infinite&&this.elements.$postsOuterWrapper.is(":visible")&&this.getInfiniteScrollPosts(),this.settings.loadMoreBtn&&this.elements.$postsOuterWrapper.is(":visible")&&this.loadMorePosts()},hideExtraItems:function(){var e=elementorFrontend.config.experimentalFeatures.container,t=this.$element.find(".premium-extra-item");$parentCol=t.closest(".elementor-widget-premium-grid-item").parents(".e-con").first(),$parentCol=!e||$parentCol.length<1?t.closest(".elementor-top-column"):$parentCol,$parentCol.css({visibility:"hidden",opacity:0})},initFilterTabs:function(){var t=this,s=this.getSettings("selectors");this.elements.$filterTabs.on("click.paFilterTabs",function(i){i.preventDefault(),t.$element.find(s.activeElement).removeClass("active"),e(this).addClass("active"),t.settings.activeCategory=e(this).attr("data-filter"),t.settings.pageNumber=1,t.settings.reqType="filter",t.settings.infinite?(t.getPostsByAjax(!1),t.settings.count=2,t.getInfiniteScrollPosts()):t.getPostsByAjax(t.settings.scrollAfter)})},paginate:function(){var t=this,s=this.$element,i=this.getSettings("selectors");s.on("click",".premium-smart-listing__pagination-container .page-numbers",function(r){if(r.preventDefault(),"default"===t.settings.paginationType)var n=t.settings.pageNumber;else{if(e(this).hasClass("current"))return;n=parseInt(s.find(i.currentPage).html())}e(this).hasClass("next")?t.settings.pageNumber=n+1:e(this).hasClass("prev")?t.settings.pageNumber=n-1:t.settings.pageNumber=e(this).html(),t.getPostsByAjax(t.settings.scrollAfter)})},getInfiniteScrollPosts:function(){var t=jQuery(window).outerHeight()/1.25,s=this;e(window).scroll(function(){if(s.elements.$filterTabs.length>1){var i=s.elements.$postsOuterWrapper.find(".premium-smart-listing__post-wrapper");s.settings.total=i.data("total")}s.settings.count<=s.settings.total&&e(window).scrollTop()+t>=s.$element.find(".premium-smart-listing__post-wrapper:last").offset().top&&1==s.settings.isLoaded&&(s.settings.pageNumber=s.settings.count,s.settings.reqType="infinite",s.getPostsByAjax(!1),s.settings.count++,s.settings.isLoaded=!1)})},loadMorePosts:function(){var e=this;e.$element.find(".premium-smart-listing__load-more-btn-wrapper a").on("click.PaLoadMore",function(){if(e.elements.$filterTabs.length>1){var t=e.elements.$postsOuterWrapper.find(".premium-smart-listing__post-wrapper");e.settings.total=t.data("total")}e.settings.count<=e.settings.total&&1==e.settings.isLoaded&&(e.settings.pageNumber=e.settings.count,e.settings.reqType="infinite",e.getPostsByAjax(!1),e.settings.count++,e.settings.isLoaded=!1)})},getPostsByAjax:function(t){void 0===this.settings.activeCategory&&(this.settings.activeCategory="*");var s=this,i=this.getSettings("selectors");e.ajax({url:PremiumProSettings.ajaxurl,dataType:"json",type:"POST",data:{action:"pa_get_posts",page_id:s.elements.$widgetWrapper.data("page"),widget_id:s.$element.data("id"),page_number:s.settings.pageNumber,req_type:s.settings.reqType,category:s.settings.activeCategory,nonce:PremiumSettings.nonce},beforeSend:function(){s.elements.$postsOuterWrapper.append('<div class="premium-loading-feed"><div class="premium-loader"></div></div>'),t&&e("html, body").animate({scrollTop:s.elements.$postsOuterWrapper.offset().top-50},"slow")},success:function(e){if(e.data){s.$element.find(i.loading).remove();var t=e.data.posts,r=e.data.paging;s.settings.infinite||s.settings.loadMoreBtn?(s.settings.isLoaded=!0,s.elements.$filterTabs.length>1&&1===s.settings.pageNumber?s.elements.$postsOuterWrapper.html(t):"custom"===s.getElementSettings().pa_spl_skin?(s.elements.$postsOuterWrapper.append(t),s.hideExtraItems()):s.$element.find(".premium-smart-listing__posts-wrapper").append(t)):(s.elements.$postsOuterWrapper.html(t),s.$element.find(".premium-smart-listing__footer").html(r)),s.removeMetaSeparators()}},error:function(e){console.log(e)}})},getSlickSettings:function(){var e=this.settings,t=this.getElementSettings(),s=t.carousel_rows?t.carousel_rows:1,i=t.listing_cols?t.listing_cols:1,r=t.carousel_rows_tablet?t.carousel_rows_tablet:1,n=t.carousel_rows_mobile?t.carousel_rows_mobile:1,a=t.listing_cols_tablet?t.listing_cols_tablet:1;return{infinite:!0,slidesToShow:i,slidesToScroll:parseInt(e.slidesToScroll||i),responsive:[{breakpoint:1025,settings:{slidesToShow:a,slidesToScroll:1,rows:r}},{breakpoint:768,settings:{slidesToShow:1,slidesToScroll:1,rows:n}}],autoplay:e.autoPlay,rows:s,speed:e.speed,autoplaySpeed:e.autoplaySpeed,fade:e.fade,centerMode:e.center,centerPadding:e.spacing+"px",draggable:!0,arrows:!1}},removeMetaSeparators:function(){var t=this.getSettings("selectors");this.$element.find(t.gridItem).each(function(s,i){var r=e(i).find(t.metaSeparators),n=e(i).find(t.user);1===r.length?n.length||e(i).find(t.metaSeparators).remove():n.length||e(i).find(t.metaSeparators).first().remove()})},reconstructFilterTabs:function(){var t=getComputedStyle(this.$element.find(".premium-smart-listing__header-wrapper")[0]).getPropertyValue("--premium-spl-filters"),s=this.$element.find(".premium-smart-listing__filter-tabs"),i=s.find("li:not(.premium-smart-listing__filter-tabs-menu-wrapper)"),r=s.find(".premium-smart-listing__filter-tabs-menu-wrapper ul"),n=s.find("li:not(.premium-smart-listing__filter-tabs-menu-wrapper):not(.premium-smart-listing__wrapped-filter)"),a=r.find("li");if(t>n.length){i.css("visiblity","hidden");for(var l=t-n.length,o=0;o<l;o++){var p=e(a[o]).removeClass("premium-smart-listing__wrapped-filter").clone();e(a[o]).remove(),s.find(".premium-smart-listing__filter-tabs-menu-wrapper").before(p)}}else if(t<n.length){i.css("visiblity","hidden");for(l=n.length-t,o=1;o<=l;o++){p=e(n[n.length-o]).addClass("premium-smart-listing__wrapped-filter").clone();e(n[n.length-o]).remove(),r.prepend(p)}}this.checkWrappedFilters(),i.css("visiblity","visible")},checkWrappedFilters:function(){this.$element.find(".premium-smart-listing__filter-tabs-menu-wrapper ul").children().length>0?this.$element.find(".premium-smart-listing__filter-tabs-menu-wrapper").show():this.$element.find(".premium-smart-listing__filter-tabs-menu-wrapper").hide()}});elementorFrontend.elementsHandler.attachHandler("premium-smart-post-listing",t)})}(jQuery);